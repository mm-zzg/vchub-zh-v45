# 查询异常情况说明

## 1、**数据库查询导致程序或数据库崩溃说明**

当您在执行数据查询时遇到数据库或应用程序崩溃的情况，这类问题通常由三个核心因素引发：​**查询时间过长**、**返回结果集过大**以及**低效的查询条件或表设计缺陷**。理解这些原因并掌握自主排查方法，可显著提升系统稳定性与查询效率。

- **查询时间过长**：通过配置对应数据库的最大查询时间可以让查询等待时间超过配置的时间时主动退出此次查询。
- **返回结果集过大**：通过配置对应数据库的最大查询点数可以让查询结果数超过配置的最大点数时主动退出此次查询。
- **低效的查询条件或表设计缺陷**：若查询条件未充分利用索引，或表结构设计不合理（如缺少分区、过度归一化），即使硬件资源充足，系统仍可能因逻辑缺陷而崩溃。

## 2、程序可预见异常情况说明

#### 参数配置

在“数据库“ -> ”数据库连接“页面，点击某条数据的”修改“按钮，查看其具体配置。

![alt text](22.png)

各数据库的默认配置如下：

| **数据库**     | **最大查询点数** | **查询超时** |
|:----------------|:------------------|:--------------|
| **MySQL**      | 500万            | 30秒         |
| **SQL Server** | 500万            | 30秒         |
| **PostgreSQL** | 500万            | 30秒         |
| **SQLite**     | 100万            | 30秒         |

## 查询异常场景

#### 查询超时

**触发条件**：查询耗费的时间超过数据库上配置的超时时间

**处理方式**

1. 优化查询SQL语句、查询条件或者修改表设计如添加索引等
2. 调整超时时间配置

#### 超过最大查询点数

**触发条件**：查询返回的数据量超过数据库上配置的最大查询点数

**处理方式**

1. 优化查询方式，如使用top、limit分页查询，优化查询条件等
2. 调整最大查询点数配置

#### 语法错误

**触发条件**：SQL语句有语法错误

**处理方式**

调整SQL语句，修复语法错误

#### 其他异常

在查询或者执行的过程中发生的任何异常都会以错误消息提示的方式交互，您可以根据具体的错误分析具体原因并找到合适的解决方案。

