# 服务脚本

服务脚本是一种在服务器上运行的脚本，它通常被设计用于执行特定任务或维护操作，以确保系统的正常运行。这些脚本可以根据其执行方式和目的被分为三类：

1. 变量变化
2. 周期性
3. 时间表

![alt text](2.png)

## 新增脚本

#### **变量变化**

变量变化是指当触发器中所选条件变化时，执行相应的脚本操作。

在”**脚本**“->”**服务脚本**“页面，点击"**变量变化**"页签，在列表右上角点击“**新增**”按钮进行创建。

![alt text](3.png)

| **属性** | **说明**|
|:----------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| 名称     | 脚本的名称。|
| 变量列表 | 需要绑定的变量。|
| 触发器   | 用于设置什么条件下触发该脚本，包含： <br>- **值变化**：变量列表中任意变量的值发生变化就触发脚本。 <br>- **时间戳变化**：变量列表中任意变量的时间戳发生变化就触发脚本。 |
| 时区     | 设置脚本按照哪个时区的时间执行。|
| 记录日志 | 是否记录脚本日志。|
| 脚本     | 编写要执行的脚本。|

新增的脚本默认是“**禁用**”状态，需要手动启用，启用后脚本才会正常执行。

![alt text](4.png)

如果开启了“记录日志“，点击该脚本的”查看日志“按钮，显示详细的日志信息。

![alt text](5.png)

#### **周期性**

周期性脚本是按照设定频率定时触发的脚本，在服务器后端执行。

在”**脚本**“->”**服务脚本**“页面，点击"**周期性**"页签，在列表右上角点击“**新增**”按钮。

![alt text](6.png)

| **属性** | **描述**                        |
|:----------|:---------------------------------|
| 名称     | 脚本的名称。                     |
| 频率(ms) | 执行脚本的频率。                 |
| 时区     | 设置脚本按照哪个时区的时间执行。 |
| 记录日志 | 是否记录脚本日志。               |
| 脚本     | 编写要执行的脚本。               |

周期性脚本创建完成后默认“**禁用**”状态，需要手动启用，启用后脚本才会正常执行。

![alt text](7.png)

如果开启了记录日志，点击查看日志也能查看周期性脚本的执行日志

![alt text](8.png)

#### **时间表**

详见 [时间表](schedule.md) 。

#### 导入/导出脚本

点击列表右上角的"**导出**"按钮，弹出导出窗口，可以选择需要导出的脚本。

![alt text](9.png)

点击导入按钮，可以将导出的文件再次导入。

![alt text](10.png)

